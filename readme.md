[![codecov](https://codecov.io/gh/steftroubadour/foundry-template/branch/main/graph/badge.svg?token=DRHMFJHS9Y)](https://codecov.io/gh/steftroubadour/foundry-template)

# Yi Jing 易经

A blockchain implementation of I Ching divination.

[https://en.wikipedia.org/wiki/I_Ching](https://en.wikipedia.org/wiki/I_Ching)

![Yi Jing](img\yijing.png)

## Functionalities

### NFT ERC-721
The draw result of I Ching divination is store as an NFT

#### metadata
* image: animated SVG store on-chain (not on IPFS)
* name & question: not encrypted. Encryption needs an DApp to do it. It can't be made on-chain. 
Infortunately, we can't use the tx signature(created by private key) in the S Contract to create an encryption Key.

#### Support affiliation
An affiliate must earn revenues publishing

#### Support non custodial wallet
Add the possibility to new Blockchain users, to create an account, pay with card & have a non-custodial wallet
see [web3auth.io](https://web3auth.io)

### Affiliate integration
make an easy IFrame integration for any website page.

## Tech specifications

### Smart contracts

Development use Solidity language and Foundry

#### Random contract

Random will be used on-chain

#### Image contract

image is an animated svg and can have multiple versions

#### NFT contract

draw will be save on-chain in an NFT

* erc721
* metadata and image are **on-chain**
* image is read from previous contract
* must have a specific tokenURI to retrieve specific image version

#### Affiliation contract

To share benefits from mint with affiliated

* add/remove affiliate member
* member has address and percent retribution in basis point (bp)

## Contracts addresses

| Chain                                | ChainId  | NFT | Random | Image | Affiliation |
|--------------------------------------|----------|-----|--------|-------|-------------|
| Ethereum Testnet Sepolia             | 11155111 | 0x  | 0x     | 0x    | 0x          |
| Polygon Testnet Mumbai               | 80001    | 0x  | 0x     | 0x    | 0x          |
| Polygon Mainnet                      | 137      | 0x  | 0x     | 0x    | 0x          |
| Nitro Goerli Rollup Testnet Arbitrum | 421613   | 0x  | 0x     | 0x    | 0x          |
| Arbitrum One Mainnet                 | 42161    | 0x  | 0x     | 0x    | 0x          |
| other                                | X        | 0x  | 0x     | 0x    | 0x          |

# FLOW
## Random draw, first hexagram

By writing your name or pseudonym and a well-chosen question, we can consider the intention to be fixed. To have the
first hexagram call for Yi Jing divination, we use randomness, assuming that the random hexagram result is equal to the
yarrow-stalk method or coins method results. The randomness is on-chain, but it could be generated by the server. The
usage of on-chain VRF like Chainlink VRF is not used because it is not necessary.

### first hexagram

![hexagram](img/hexagram.png)

### from hexagram (the present, how it is now)

![from](img/from.png)

### to hexagram (how that could be)

![to](img/to.png)

## Mint the NFT

To save draw, pseudo & question for eternity, we mint an NFT

### pseudo & question

There is no on-chain solution to encrypt data. Therefore, we can’t save an on-chain encrypted question. Your question
will be saved clearly.

![nft_image](img/nft_image.png)

1. Add more detail about what your blockchain implementation does and how it works. This will help potential users
   understand what your project is all about and how it can benefit them.

2. Include more information about the technology you’re using to build your blockchain implementation. This will help
   other developers understand how your project works and how they can contribute to it.

3. Consider adding some screenshots or diagrams to help illustrate how your blockchain implementation works.